### Item57 - 소스맵을 사용하여 타입스크립트 디버깅하기

- 타입스크립트 코드를 실행한다는 것은, 엄밀히 말하자면 타입스크립트 컴파일러가 생성한 자바스크립트 코드를 실행한다는 것이다.
- 디버거는 런타임에 동작하며, 현재 동작하는 코드가 어떤 과정을 거쳐서 만들어진 것인지 알지 못한다.
- 디버깅을 하면 보게 되는 코드는 전처리기, 컴파일러, 압축기를 거친 자바스크립트 코드다.
- 디버깅 문제를 해결하기 위해 브라우저 제조사들은 서로 협력하여 소스맵(source map)이라는 해결책을 내놓았다.
- 소스맵은 변환된 코드의 위치와 심벌들을 원본 코드의 원래 위치와 심벌들로 매핑한다.
- 타입스크립트가 소스맵을 생성할 수 있도록 `tsconfig.json`에서 `sourceMap`옵션을 설정한다.

```tsx
{
  "compilerOptions": {
    "sourceMap": true
  }
}
```

- 컴파일을 실행하면 각 `.ts`파일에 대해서 `.js`와 `.js.map` 두 개의 파일을 생성한다. `.js.map`파일이 바로 소스맵이다.
- 소스맵이 있으면 디버거에서 생성된 자바스크립트 대신 원본 타입스크립트 소스를 사용할 수 있다.
- 소스 파일 목록 중에 기울임 글꼴은 웹페이지에 포함된 ‘실제 파일’이 아니라는 것을 뜻한다.
- 이외에도 소스맵에 대해 알아야 할 몇 가지 사항이 있다.
  - 타입스크립트와 함께 번들러나 압축기를 사용하고 있다면, 번들러나 압축기가 각자의 소스맵을 생성한다.
  - 상용 환경에서 소스맵이 유출되고 있는지 확인한다. 소스맵의 원본 코드의 인라인 복사본이 포함되어 있다면 공개해서는 안 될 내용이 들어 있을 수 있다. (주석, 버그 추적을 위한 URL 등)
