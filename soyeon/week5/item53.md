### Item53 - 타입스크립트 기능보다는 ECMAScript 기능을 사용하기

- 자바스크립트에 새로 추가된 기능은 타입스크립트 초기 버전에서 독립적으로 개발했던 기능과 호환성 문제를 발생시켰다.
- 타입스크립트 팀은 자바스크립트의 신규 기능을 그대로 채택하고 타입스크립트 초기 버전과 호환성을 포기했다.
- 이 원칙이 세워지기 전 이미 사용되고 있던 몇 가지 기능들이 존재하는데, 이 기능들은 타입 공간과 값 공간의 경계를 혼란스럽게 만들기 때문에 사용하지 않는 것이 좋다.

1. 열거형(enum)

   ```tsx
   enum Flavor {
     VANILLA = 0,
     CHOCOLATE = 1,
     STRAQWBERRY = 2,
   }

   let flavor = Flavor.CHOCOLATE; // 타입 Flavor
   Flavor[0]; // 값이 VANILLA
   ```

   - 단순히 값을 나열하는 것보다 실수가 적고 명확하기 때문에 일반적으로 열거형을 사용한다.
   - 그러나 타입스크립트의 열거형은 상황에 따라 다르게 동작한다.
     - 숫자 열거형에 0,1,2외의 다른 숫자가 할당되면 매우 위험하다
     - 상수 열거형은 보통의 열거형과 달리 런타임에서 완전히 제거된다.
     - `preserveContEnums`플래그를 설정한 상태의 상수 열거형은 보통의 열거형처럼 런타임 코드에 상수 열거형 정보를 유지한다.
     - 타입스크립트의 일반적인 타입들이 할당 가능성을 체크하기 위해서 구조적 타이핑을 사용하는 반면, 문자열 열거형은 명목적 타이핑을 사용한다.
     ```tsx
     function scoop(flavor: Flavor) {...}
     scoop('vanilla') // 자바스크립트에서는 정상. 타입스크립트에서는 오류
     ```
     - `Flavor`은 런타입 시점에는 문자열이기 때문에, 자바스크립트에서 다음과 같이 호출할 수 있다.
     - 그러나 타입스크립트에서는 열거형을 임포트하고 문자열 대신 사용해야 한다.
     ```tsx
     import {Flavor] from 'ice-cream';
     scoop(Flavor.VANILLA) // 정상
     ```
     - 이처럼 자바스크립트와 타입스크립트에서 동작이 다르기 때문에 문자열 열거형은 사용하지 않는 것이 좋다
     - 열거형 대신 리터럴 타입의 유니온을 사용한다.
     ```tsx
     type Flavor = "vanilla" | "chocolate" | "strawberry";
     ```

1. 매개변수 속성

   - 일반적으로 클래스를 초기화할 때 속성을 할당하기 위해 생성자의 매개변수를 사용한다.

   ```tsx
   class Person {
     name: string;
     constructor(name: string) {
       this.name = name;
     }
   }
   ```

   - 타입스크립트는 더 간결한 문법을 제공한다.

   ```tsx
   class Person {
     constructor(public name: string) {}
   }
   ```

   - `public name`은 `매개변수 속성`이라 불리며, 멤버 변수로 `name`을 선언한 이전 예제와 동일하게 동작
   - 그러나 몇 가지 문제점이 있다.
     - 타입스크립트 컴파일은 타입 제거가 이루어지므로 코드가 줄어들지만, 매개변수 속성은 코드가 늘어나는 문법이다.
     - 매개변수 속성이 런타임에는 실제로 사용되지만, 타입스크립트 관점에서는 사용되지 않는 것처럼 보인다.
     - 매개변수 속성과 일반 속성을 섞어서 사용하면 클래스의 설계가 혼란스러워진다.
     ```tsx
     class Person {
       first: string;
       last: string;
       constructor(public name: string) {
         [this.first, this.last] = name.split(" ");
       }
     }
     ```
     - `Person`클래스에는 세 가지 속성이 있지만, `name`은 매개변수 속성에 있어 일관성이 없다.
     - 클래스에 매개변수 속성만 존재한다면 클래스 대신 인터페이스로 만들고 객체 리터럴을 사용하는 것이 좋다.

1. 네임스페이스와 트리플 슬래시 포인트

   - 타입스크립트 자체적으로 모듈 시스템을 구축했고, `module`키워드와 `트리플 슬래시` 임포트를 사용했다.
   - ECMAScript 2015가 공식적으로 모듈 시스템을 도입한 이후, 타입스크립트는 충돌을 피하기 위해 `module`과 같은 기능을 하는 `namespace`키워드를 추가했다.
   - `트리플 슬래시`임포트와 `module`키워드는 호환성을 위해 남아있을 뿐이므로, ECMAScript 2015의 모듈(import, export)을 사용한다.

1. 데코레이터
   - 데코레이터는 클래스, 메서드, 속성에 `annotation`을 붙이거나 기능을 추가하는 데 사용할 수 있다.
   - 예를 들어, 클래스의 메서드가 호출될 때마다 로그를 남기려면 `logged`애너테이션을 정의할 수 있다.
   - 데코레이터는 앵귤러를 지원하기 위해 추가되었으며 `tsconfig`에 `experimentalDecorators`속성을 설정하고 사용해야 한다.
   - 그러나 표준화가 완료되지 않았기 때문에, 사용 중인 데코레이터가 비표준으로 바뀌거나 호환성이 깨질 수 있다.
